<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>盗版监测平台上传演示</title>
</head>
<script src="js/jquery-3.1.1.min.js"></script>
<script>
    $('#mytable').on('click()', 'tr',function(){
        alert('dkjkk')
    });
//别忘了导入该用的js文件
function update(){
    $.ajax({
        url: '/update', //请求的url
        type: 'post', //请求的方式
        timeout:2000,
        async:true,
        //data: $('#keyword').serialize(), //form表单里要提交的内容，里面的input等写上name就会提交，这是序列化
        error:function (data) {
           // alert('请求失败');
        },
        success:function (data) {
            //alert(data)
            var obj = $.parseJSON(data)
            //alert(obj.data)
            //alert(obj.data.length)
            var str1 = "";
            //清空table中的html
            $("#test").html("");
            for(var i = 0;i<obj.data.length;i++){
                //alert(obj.data[i][2])
                str1 = "<tr>" + 
                    "<td>"+obj.data[i][0] + "</td>" +
                    "<td>"+obj.data[i][1] + "</td>" +
                    "<td>"+obj.data[i][2] + "</td>" +
                    "</tr>";
                $("#test").append(str1);
            }
        }
    });
}
function subForm() {
    $.ajax({
        url: '/search', //请求的url
        type: 'post', //请求的方式
        timeout:2000,
        async:true,
        dataType:'json',
        data: {'keyword':$("#keyword").val()}, //form表单里要提交的内容，里面的input等写上name就会提交，这是序列化
        error:function (data) {
            alert('请求失败');
        },
        success:function (data) {
            //alert(data)
        }
    });
    setInterval("update();",2000);
}
</script>
<body>
    <h3># 总计搜索多少个资产</h2>
        <input type="text" class="txt_input" name="ID"  value="" style="margin-top:10px;" id="ID" placeholder="ID"/>
        <input type="text" class="txt_input" name="keyword"  value="" style="margin-top:10px;" id="keyword" placeholder="Name contains"/>
        <input type="text" class="txt_input" name="imdbid"  value="" style="margin-top:10px;" id="imdbid" placeholder="Imdb id"/>
        <input type="text" class="txt_input" name="Year"  value="" style="margin-top:10px;" id="Year" placeholder="Year"/>
        <button type="button" title="Filter" class="button-new" style="margin-top:15px;" onclick="subForm()">Filter</button>
    <table id="mytable" border="2">
        <thead>
        <th>ID</th>
        <th>Name</th>
        <th>Imdb Id</th>
        <th>Type</th>
        <th>Year</th>
        <th>Keywords</th>
        <th>Searches</th>
        <th>Last search</th>
        <th></th>
        <tr>
            <td>1</td>
            <td>throne</td>
            <td>123</td>
            <td>file</td>
            <td>2017</td>
            <td><a href="language_filter.html">game of thrones</a>game of thrones</td>
            <td>12000</td>
            <td>2019-8-9 16:32:30</td>
            <td><button type="button" title="Filter" class="button-new" style="margin-top:0px;" onclick="subForm()"><a href="lanuch_new_search.html">Lanuch new search</a></button></td>
        </tr>
        </thead>
        <tbody id="test">
        
        </tbody>
    </table>
</body>
</html>